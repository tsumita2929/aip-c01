window.DOMAIN5_QUESTIONS = window.DOMAIN5_QUESTIONS || [];
window.DOMAIN5_QUESTIONS.push({
  "id": "D5-016",
  "domain": 5,
  "task": "5.2",
  "skill": "5.2.4",
  "type": "single",
  "difficulty": "hard",
  "question": "ある企業が RAG システムの検索品質が低下していることに気づきました。調査の結果、最近追加された新しいドキュメント群のベクトル埋め込みの品質に問題がある可能性が浮上しました。既存のドキュメントとの検索品質の差異を診断し、根本原因を特定するために最も効果的なアプローチはどれですか。",
  "options": [
    {
      "id": "A",
      "text": "Amazon OpenSearch Service のインデックスを再作成して、すべてのドキュメントを再インデックスする"
    },
    {
      "id": "B",
      "text": "新しいドキュメントをすべて削除して、問題が解消されるか確認する"
    },
    {
      "id": "C",
      "text": "Amazon Bedrock の埋め込みモデルのバージョンを最新に更新する"
    },
    {
      "id": "D",
      "text": "新旧ドキュメントの埋め込みベクトルの分布をt-SNEやUMAPで可視化して比較し、新しいドキュメントのチャンク化戦略が既存ドキュメントと整合しているかを確認する。さらに、新しいドキュメントに対するクエリ-ドキュメント間のコサイン類似度スコアの分布を分析する"
    }
  ],
  "correctAnswers": [
    "D"
  ],
  "explanation": "正解はDです。埋め込み品質の診断には、ベクトル空間での分布分析が最も効果的です。t-SNEやUMAPによる可視化で新旧ドキュメントのクラスタリング状態を確認し、チャンク化戦略の不整合（チャンクサイズの違い、オーバーラップ設定の差異など）を特定できます。また、クエリ-ドキュメント間のコサイン類似度分布を分析することで、新しいドキュメントの検索精度を定量的に評価できます。Aのインデックス再作成は根本原因を特定せずに実施しても、チャンク化や埋め込みの問題が残っていれば効果がありません。Bのドキュメント削除は診断アプローチとして非効率であり、問題の根本原因の理解には繋がりません。Cの埋め込みモデルの更新は、既存ドキュメントのベクトルとの互換性問題を引き起こす可能性があり、すべてのドキュメントの再ベクトル化が必要になるため、まず診断を行うべきです。（スキル5.2.4）",
  "optionExplanations": {
    "A": {
      "correct": false,
      "text": "不正解です。インデックス再作成はデータの再構築には使えるものの、根本原因を特定せずに実施してもチャンク化や埋め込みの問題が残っていれば効果がありません。根本原因の特定という要件を満たしません。"
    },
    "B": {
      "correct": false,
      "text": "不正解です。ドキュメント削除は問題の切り分けには使えるものの、診断アプローチとして非効率であり問題の根本原因の理解には繋がりません。根本原因の特定という要件を満たしません。"
    },
    "C": {
      "correct": false,
      "text": "不正解です。埋め込みモデルの更新は品質向上の可能性はあるものの、既存ドキュメントのベクトルとの互換性問題を引き起こす可能性があり、まず診断を行うべきです。根本原因の特定なしに対策を実施する点が不適切です。"
    },
    "D": {
      "correct": true,
      "text": "正解です。t-SNE/UMAPによるベクトル分布の可視化とコサイン類似度分析は、検索品質の差異の診断と根本原因の特定の両要件を直接満たします。特にチャンク化戦略の不整合を最小の運用負荷で特定できます。"
    }
  },
  "references": [
    {
      "title": "Amazon Bedrock ナレッジベース",
      "url": "https://docs.aws.amazon.com/bedrock/latest/userguide/knowledge-base.html"
    },
    {
      "title": "Amazon OpenSearch Service ベクトル検索",
      "url": "https://docs.aws.amazon.com/opensearch-service/latest/developerguide/knn.html"
    }
  ]
});
