window.DOMAIN5_QUESTIONS = window.DOMAIN5_QUESTIONS || [];
window.DOMAIN5_QUESTIONS.push({
  "id": "D5-019",
  "domain": 5,
  "task": "5.2",
  "skill": "5.2.4",
  "type": "single",
  "difficulty": "hard",
  "question": "ある企業が運用しているRAGシステムで、時間の経過とともに検索結果の関連性が徐々に低下しているドリフト現象が検出されました。ナレッジベースのドキュメントは定期的に更新されており、埋め込みモデルは変更していません。この問題の最も可能性の高い根本原因と対処方法の組み合わせとして適切なものはどれですか。",
  "options": [
    {
      "id": "A",
      "text": "Amazon OpenSearch Service のシャード数が不足している。シャード数を増やしてインデックスを再作成する"
    },
    {
      "id": "B",
      "text": "Amazon Bedrock のAPIレート制限に達している。Provisioned Throughput を購入してスループットを向上させる"
    },
    {
      "id": "C",
      "text": "新しいドキュメントの用語や文体が既存ドキュメントと大きく異なり、埋め込み空間での表現が一貫していない。チャンク化戦略を見直し、新しいドキュメントに対する前処理（用語の正規化、メタデータの付与）を強化する"
    },
    {
      "id": "D",
      "text": "Amazon S3 のバケットポリシーが変更されている。IAMポリシーを見直してアクセス権限を修正する"
    }
  ],
  "correctAnswers": [
    "C"
  ],
  "explanation": "正解はCです。ドリフト現象の根本原因として最も可能性が高いのは、新しいドキュメントの語彙や文体が既存ドキュメントと異なり、同じ埋め込みモデルで生成されたベクトルが埋め込み空間内で異なるクラスターを形成していることです。これにより、ユーザーのクエリと新しいドキュメント間のセマンティックマッチングが劣化します。対処として、チャンク化戦略の見直し、用語の正規化、メタデータの追加による検索精度の向上が効果的です。Aのシャード数はインデックスの分散処理に関する設定であり、検索の意味的関連性には直接影響しません。BのAPIレート制限はスロットリングエラーとして現れ、検索品質のドリフトとは異なる症状です。DのS3バケットポリシーの変更はアクセス拒否エラーとして現れ、検索品質の漸進的な低下とは異なります。（スキル5.2.4）",
  "optionExplanations": {
    "A": {
      "correct": false,
      "text": "不正解です。シャード数はインデックスの分散処理に関する設定であるものの、検索の意味的関連性には直接影響しません。検索品質の漸進的な低下という症状と矛盾します。"
    },
    "B": {
      "correct": false,
      "text": "不正解です。API レート制限はスロットリングエラーとして現れるものの、検索品質の漸進的なドリフトとは異なる症状です。時間経過に伴う関連性低下という症状と矛盾します。"
    },
    "C": {
      "correct": true,
      "text": "正解です。新しいドキュメントの用語・文体の差異による埋め込み空間の不整合は、時間経過に伴う関連性低下という症状を説明できる唯一の原因です。埋め込みモデル未変更という条件により、モデル側の問題は排除されます。"
    },
    "D": {
      "correct": false,
      "text": "不正解です。S3 バケットポリシーの変更はアクセス拒否エラーとして現れるものの、検索品質の漸進的な低下とは異なります。ドリフト現象という症状と矛盾します。"
    }
  },
  "references": [
    {
      "title": "Amazon Bedrock ナレッジベース",
      "url": "https://docs.aws.amazon.com/bedrock/latest/userguide/knowledge-base.html"
    },
    {
      "title": "Amazon Bedrock ナレッジベースのチャンキングとパース",
      "url": "https://docs.aws.amazon.com/bedrock/latest/userguide/knowledge-base-chunking-parsing.html"
    }
  ]
});
