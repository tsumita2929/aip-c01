window.DOMAIN5_QUESTIONS = window.DOMAIN5_QUESTIONS || [];
window.DOMAIN5_QUESTIONS.push({
  "id": "D5-018",
  "domain": 5,
  "task": "5.2",
  "skill": "5.2.1",
  "type": "multiple",
  "difficulty": "medium",
  "question": "ある企業が Amazon Bedrock を使用した文書処理システムで、大量のPDFドキュメントを処理しています。一部のドキュメントで処理結果が不完全になる問題が発生しており、調査の結果、コンテキストウィンドウの制限に起因する切り捨てエラーが原因であることが判明しました。この問題に対処するための適切なアプローチを2つ選択してください。",
  "options": [
    {
      "id": "A",
      "text": "Amazon Bedrock のすべてのモデルに対して、コンテキストウィンドウの拡張をAWSサポートにリクエストする"
    },
    {
      "id": "B",
      "text": "ドキュメントの内容に基づいて動的にチャンクサイズを調整するアダプティブチャンキング戦略を実装し、意味的な区切り（セクション、段落）でチャンクを分割する"
    },
    {
      "id": "C",
      "text": "処理が不完全なドキュメントを自動的にスキップして、エラーログにのみ記録する"
    },
    {
      "id": "D",
      "text": "プロンプト設計を最適化し、システムプロンプトとユーザープロンプトの合計トークン数を監視して、コンテキストウィンドウの上限の80%以内に収まるよう制御する"
    },
    {
      "id": "E",
      "text": "Amazon S3 のオブジェクトサイズ制限を増やして、より大きなドキュメントを保存できるようにする"
    }
  ],
  "correctAnswers": [
    "B",
    "D"
  ],
  "explanation": "正解はBとDです。Bのアダプティブチャンキング戦略は、ドキュメントの構造（見出し、段落、セクション）に基づいて意味的に適切な位置でチャンクを分割することで、コンテキストウィンドウ内に収まる適切なサイズのチャンクを生成します。これにより、重要な情報が分割されることなく処理されます。Dのプロンプト設計の最適化は、入力トークン数を監視して制限内に収めることで、切り捨てエラーを予防的に防止します。80%のバッファは、モデルの応答トークン用の余裕を確保するためのベストプラクティスです。Aのコンテキストウィンドウの拡張は、モデルの仕様として固定されており、サポートリクエストで変更できるものではありません。Cのドキュメントスキップは問題を回避するだけで根本的な解決にはならず、ビジネス要件として全ドキュメントの処理が求められている場合には不適切です。EのS3オブジェクトサイズはドキュメントの保存に関する制限であり、モデルのコンテキストウィンドウとは無関係です。（スキル5.2.1）",
  "optionExplanations": {
    "A": {
      "correct": false,
      "text": "不正解です。コンテキストウィンドウの拡張はモデルの仕様として固定されているものの、AWS サポートリクエストで変更できるものではありません。切り捨てエラーへの対処という要件を満たせません。"
    },
    "B": {
      "correct": true,
      "text": "正解です。アダプティブチャンキング戦略はドキュメントの構造に基づいて意味的に適切な位置でチャンクを分割し、コンテキストウィンドウの制限への対処と処理結果の完全性の両要件を直接満たします。"
    },
    "C": {
      "correct": false,
      "text": "不正解です。ドキュメントスキップはエラー回避には使えるものの、問題の根本的な解決にはならず、全ドキュメントの処理が求められるビジネス要件には不適切です。"
    },
    "D": {
      "correct": true,
      "text": "正解です。プロンプト設計を最適化し合計トークン数を監視してコンテキストウィンドウの80%以内に収めることで、切り捨てエラーの予防と処理結果の完全性の両要件を直接満たします。"
    },
    "E": {
      "correct": false,
      "text": "不正解です。S3 のオブジェクトサイズはドキュメントの保存に関する制限であるものの、モデルのコンテキストウィンドウの制限とは無関係です。切り捨てエラーへの対処という要件を満たせません。"
    }
  },
  "references": [
    {
      "title": "Amazon Bedrock ナレッジベースのチャンキング",
      "url": "https://docs.aws.amazon.com/bedrock/latest/userguide/knowledge-base-chunking-parsing.html"
    },
    {
      "title": "Amazon Bedrock 推論パラメータ",
      "url": "https://docs.aws.amazon.com/bedrock/latest/userguide/inference-parameters.html"
    }
  ]
});
