window.DOMAIN2_QUESTIONS = window.DOMAIN2_QUESTIONS || [];
window.DOMAIN2_QUESTIONS.push({
  "id": "D2-002",
  "domain": 2,
  "task": "2.1",
  "skill": "2.1.1",
  "type": "multiple",
  "difficulty": "hard",
  "question": "ある物流企業が Strands Agents SDK を使用して、倉庫管理エージェントを構築しています。このエージェントは社内の在庫管理データベース、外部の配送業者API、および気象データサービスと連携し、最適な出荷スケジュールを提案する必要があります。開発チームは Model Context Protocol（MCP）を活用してこれらの外部ツールを統合する方針です。ツールの追加・変更が頻繁に発生する運用環境で、統合の保守性と拡張性を最大化するアーキテクチャとして正しいものを2つ選んでください。",
  "options": [
    {
      "id": "A",
      "text": "各外部サービスを MCP サーバーとして実装し、Strands エージェントを MCP クライアントとして構成する。エージェントが MCP サーバーからツール定義を動的に検出・呼び出しすることで、ツール追加時にエージェント側のコード変更を不要にする"
    },
    {
      "id": "B",
      "text": "各外部サービスの接続情報をエージェントのソースコードにハードコードし、新しいサービス追加時にはエージェントを再デプロイする"
    },
    {
      "id": "C",
      "text": "MCP サーバーを Amazon ECS（Fargate）でホストし、各サービスのツール定義とスキーマを MCP サーバー側で管理する。エージェントは起動時に MCP サーバーへ接続してツール一覧を自動取得し、利用可能なツールに基づいて推論を行う"
    },
    {
      "id": "D",
      "text": "すべての外部サービス呼び出しを単一の Lambda 関数に集約し、エージェントからは常にその Lambda を呼び出してリクエストパラメータでサービスを指定する"
    },
    {
      "id": "E",
      "text": "外部サービスごとに個別の SQS キューを作成し、エージェントがキューにメッセージを投入して非同期にレスポンスをポーリングする"
    }
  ],
  "correctAnswers": [
    "A",
    "C"
  ],
  "explanation": "正解は A と C です。A では MCP の標準プロトコルにより、エージェント（MCPクライアント）がMCPサーバーからツール定義を動的に検出・呼び出しできるため、ツール追加時にエージェント側のコード変更が不要になり保守性が向上します。C では MCP サーバーを ECS（Fargate）でホストしツール定義をサーバー側で一元管理することで、エージェントは起動時にツール一覧を自動取得でき拡張性が確保されます。B はハードコードによりツール変更のたびに再デプロイが必要で保守性が低下します。D は単一 Lambda への集約はサービス間の障害分離ができず、Lambda の15分タイムアウト制限により長時間の外部API呼び出しに対応できません。E は SQS ポーリングでは応答遅延が発生し、リアルタイムなスケジュール提案の要件を満たしません。（スキル2.1.1）",
  "optionExplanations": {
    "A": {
      "correct": true,
      "text": "正解です。MCP の標準プロトコルによるツールの動的検出・呼び出しは、ツール追加時のエージェント側コード変更を不要にし、保守性と拡張性の要件を直接満たします。"
    },
    "B": {
      "correct": false,
      "text": "不正解です。接続情報のハードコードは初期実装が簡単であるものの、ツール変更のたびにエージェントの再デプロイが必要となり、頻繁な変更が発生する環境での保守性の要件を満たしません。"
    },
    "C": {
      "correct": true,
      "text": "正解です。ECS（Fargate）での MCP サーバーホストとツール定義のサーバー側一元管理により、エージェントがツール一覧を自動取得でき、拡張性と運用効率の要件を直接満たします。"
    },
    "D": {
      "correct": false,
      "text": "不正解です。単一 Lambda への集約はアーキテクチャが簡素化されるものの、サービス間の障害分離ができず、Lambda の15分タイムアウト制限により長時間の外部API呼び出しに対応できないため、信頼性と拡張性の要件を満たしません。"
    },
    "E": {
      "correct": false,
      "text": "不正解です。SQS による非同期メッセージングはスケーラビリティがあるものの、ポーリングによる応答遅延が発生し、リアルタイムなスケジュール提案と即時応答の要件を満たしません。"
    }
  },
  "references": [
    {
      "title": "Amazon Bedrock Agents",
      "url": "https://docs.aws.amazon.com/bedrock/latest/userguide/agents.html"
    },
    {
      "title": "Amazon Bedrock agent tool use",
      "url": "https://docs.aws.amazon.com/bedrock/latest/userguide/agents-tool-use.html"
    }
  ]
});
