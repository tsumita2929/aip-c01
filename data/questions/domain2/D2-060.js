window.DOMAIN2_QUESTIONS = window.DOMAIN2_QUESTIONS || [];
window.DOMAIN2_QUESTIONS.push({
  "id": "D2-060",
  "domain": 2,
  "task": "2.2",
  "skill": "2.2.2",
  "type": "multiple",
  "difficulty": "hard",
  "question": "ある大手小売企業が、SageMaker リアルタイム推論エンドポイントで商品レコメンデーションモデルをホストしています。トラフィックパターンは以下の通りです：平日の日中は安定した負荷（毎秒 500 リクエスト）、毎週金曜夜から週末にかけてトラフィックが急増（毎秒 3,000 リクエスト）、年に数回のセールイベント時にさらにスパイク（毎秒 10,000 リクエスト）。以下の要件があります。(1) 通常時のコストを最小化しつつ、トラフィック急増時にもレイテンシ SLA（p99 で 200 ミリ秒以内）を維持する、(2) セールイベント時のスパイクに対して事前にキャパシティを確保する。この Auto Scaling 設計として正しいアプローチを2つ選んでください。",
  "options": [
    {
      "id": "A",
      "text": "ターゲット追跡スケーリングポリシーを設定し、InvocationsPerInstance メトリクスのターゲット値を基にインスタンス数を自動調整する"
    },
    {
      "id": "B",
      "text": "最大トラフィック（毎秒 10,000 リクエスト）を処理できるインスタンス数を常時プロビジョニングし、固定キャパシティで運用する"
    },
    {
      "id": "C",
      "text": "セールイベント前にスケジュールスケーリングアクションを設定し、事前にインスタンス数の最小値を引き上げてキャパシティを確保する"
    },
    {
      "id": "D",
      "text": "SageMaker サーバーレス推論エンドポイントに切り替えて、全てのスケーリングを自動化する"
    },
    {
      "id": "E",
      "text": "CloudWatch アラームが発報してから手動で AWS Management Console からインスタンス数を変更する"
    }
  ],
  "correctAnswers": ["A", "C"],
  "explanation": "正解は A と C です。ターゲット追跡スケーリング（A）は InvocationsPerInstance メトリクスに基づいてインスタンス数を自動調整し、平日日中と週末の負荷変動に対してコスト効率よく対応します。スケジュールスケーリング（C）はセールイベントのような予測可能なスパイクに対して事前にキャパシティを確保し、レイテンシ SLA の維持を保証します。B は常時最大キャパシティでコストが膨大です。D はサーバーレスエンドポイントでは p99 200 ミリ秒の SLA を安定して満たせません。E は手動対応で迅速なスケーリングができません。（スキル2.2.2）",
  "optionExplanations": {
    "A": {
      "correct": true,
      "text": "正解です。ターゲット追跡スケーリングポリシーは InvocationsPerInstance メトリクスに基づいてインスタンス数をリアルタイムに自動調整し、平日日中と週末のトラフィック変動に対してコストを最小化しつつレイテンシ SLA を維持します。"
    },
    "B": {
      "correct": false,
      "text": "不正解です。毎秒 10,000 リクエストを処理できる固定キャパシティは可用性の面では安全であるものの、平日日中（毎秒 500 リクエスト）のトラフィックに対してリソースが大幅に過剰となります。結果として、通常時のコスト最小化の要件を全く満たしません。"
    },
    "C": {
      "correct": true,
      "text": "正解です。スケジュールスケーリングはセールイベントのように予測可能なトラフィックスパイクに対して、事前にインスタンス数の最小値を引き上げてキャパシティを確保します。ターゲット追跡スケーリングのスケールアウト遅延を回避し、レイテンシ SLA を確実に維持できます。"
    },
    "D": {
      "correct": false,
      "text": "不正解です。サーバーレス推論エンドポイントは自動スケーリングが組み込まれているものの、コールドスタートによるレイテンシ増加が発生し、p99 で 200 ミリ秒以内の SLA を安定して維持できません。また、最大同時実行数の制限（200）があり、毎秒 10,000 リクエストのスパイクには対応できません。"
    },
    "E": {
      "correct": false,
      "text": "不正解です。CloudWatch アラームによる手動対応はインスタンス数の変更自体は可能であるものの、アラーム発報から手動操作、インスタンス起動完了までに数分〜数十分を要します。結果として、トラフィック急増時にレイテンシ SLA を維持できず、セールイベント時のスパイク対応にも間に合いません。"
    }
  },
  "references": [
    {
      "title": "Automatically scale Amazon SageMaker models",
      "url": "https://docs.aws.amazon.com/sagemaker/latest/dg/endpoint-auto-scaling.html"
    },
    {
      "title": "Define a target-tracking scaling policy",
      "url": "https://docs.aws.amazon.com/sagemaker/latest/dg/endpoint-auto-scaling-add-policy.html"
    }
  ]
});
