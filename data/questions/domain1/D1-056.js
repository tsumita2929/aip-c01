window.DOMAIN1_QUESTIONS = window.DOMAIN1_QUESTIONS || [];
window.DOMAIN1_QUESTIONS.push({
  "id": "D1-056",
  "domain": 1,
  "task": "1.6",
  "skill": "1.6.2",
  "type": "single",
  "difficulty": "hard",
  "question": "ある通信会社が、カスタマーサポートの問い合わせ対応を自動化するマルチステップの対話フローを構築しています。ユーザーの問い合わせは「料金プラン変更」「技術的なトラブルシューティング」「契約解約」「一般的な質問」の4カテゴリに分類され、カテゴリごとに異なるバックエンド処理（CRM システム参照、ネットワーク診断 API 呼び出し、解約手続きワークフロー、ナレッジベース検索）が必要です。要件として、(1) ユーザーの自然言語入力から意図を正確に分類すること、(2) 分類結果に応じた処理パスの分岐がビジュアルに確認・管理可能であること、(3) 各処理パスの実行状況と失敗箇所を容易にデバッグできること、が求められています。最も適切なアーキテクチャはどれですか？",
  "options": [
    {
      "id": "A",
      "text": "Step Functions Express ワークフローで、最初のステップに Bedrock InvokeModel タスクを配置してユーザー入力の意図を4カテゴリにJSON形式で分類させ、Choice ステートで分類結果に応じた処理パスに分岐する。各パスでは Lambda タスクで対応するバックエンドAPIを呼び出し、最後に Bedrock で最終応答を生成する"
    },
    {
      "id": "B",
      "text": "単一の Lambda 関数内で、Bedrock InvokeModel API によるユーザー意図の分類と、if-else による条件分岐ロジック、各バックエンド API の呼び出し、最終応答の生成をすべて実装する。CloudWatch Logs でログを出力してデバッグする"
    },
    {
      "id": "C",
      "text": "Amazon Lex のボットを構築し、4つのインテント（料金プラン、トラブルシューティング、解約、一般質問）を定義してスロットタイプで意図を分類する。各インテントのフルフィルメントとして Lambda 関数を設定し、バックエンド処理を実行する"
    },
    {
      "id": "D",
      "text": "Bedrock Agents を使用し、4つのアクショングループ（CRM参照、ネットワーク診断、解約手続き、ナレッジベース検索）を定義する。FM がユーザーの意図に基づいてどのアクショングループを呼び出すかを自律的に判断する"
    }
  ],
  "correctAnswers": [
    "A"
  ],
  "explanation": "Step Functions と Bedrock FM の組み合わせは、3つの要件すべてを満たします。(1) Bedrock FM がユーザーの自然言語入力から意図を分類し、定型的なインテント定義では対応困難な曖昧な表現も正確に分類できます。(2) Step Functions のビジュアルワークフローエディタで Choice ステートの分岐条件と各処理パスを視覚的に確認・管理できます。(3) Step Functions の実行履歴で各ステートの入出力と失敗箇所を詳細にトレースでき、デバッグが容易です。単一 Lambda 内の実装（B）は機能的には実現可能ですが、4カテゴリの条件分岐と各バックエンドAPI呼び出しが1つの関数に集約されるため、コードが複雑になり保守性が低下します。CloudWatch Logs でのデバッグは Step Functions の実行履歴と比較してビジュアルな可視性に欠け、どのステップで失敗したかの特定に時間がかかります。また、ワークフローの分岐構造がコードに埋め込まれ、ビジュアルな確認・管理ができません。Amazon Lex（C）はインテント分類に対応していますが、事前に定義されたインテントとスロットタイプに基づく分類であり、生成AIのように曖昧な自然言語表現を柔軟に解釈する能力に限界があります。また、各処理パスの実行状況をビジュアルにトレースする機能は Lex 単体では提供されません。Bedrock Agents（D）はFMの自律的な判断による動的なアクション選択が可能ですが、処理パスの分岐がFMの内部判断に委ねられるため、ビジュアルに確認・管理することが困難です。4つの決定論的な処理パスが事前に定義されている場合、Step Functions の明示的な分岐の方が予測可能性とデバッグ性に優れます。（スキル1.6.2）",
  "optionExplanations": {
    "A": {
      "correct": true,
      "text": "正解です。Step Functions のビジュアルワークフローで Bedrock FM の意図分類と Choice ステートの条件分岐を構成することで、処理パスの視覚的管理と実行履歴による詳細なデバッグの要件を直接満たします。FM の自然言語理解力で曖昧な入力も正確に分類できます。"
    },
    "B": {
      "correct": false,
      "text": "不正解です。単一 Lambda 内に全ロジックを集約すると、4カテゴリの分岐と各API呼び出しでコードが複雑になり保守性が低下します。CloudWatch Logs は Step Functions の実行履歴と比較してビジュアルな可視性に欠け、ワークフロー分岐構造のビジュアル確認もできないため、管理性とデバッグ性の要件を満たせません。"
    },
    "C": {
      "correct": false,
      "text": "不正解です。Lex のインテント分類は事前定義されたパターンに基づくため、生成AIのように曖昧な自然言語表現を柔軟に解釈する能力に限界があります。また、各処理パスの実行状況をビジュアルにトレースする機能が Lex 単体では提供されず、デバッグ性の要件を満たせません。"
    },
    "D": {
      "correct": false,
      "text": "不正解です。Bedrock Agents は FM の自律的な判断によるアクション選択が可能ですが、処理パスの分岐がFMの内部判断に委ねられるため、ビジュアルな確認・管理が困難です。4つの決定論的な処理パスが事前定義されている場合、Step Functions の明示的な分岐の方が予測可能性とデバッグ性に優れます。"
    }
  },
  "references": [
    {
      "title": "AWS Step Functions 開発者ガイド",
      "url": "https://docs.aws.amazon.com/step-functions/latest/dg/welcome.html"
    },
    {
      "title": "Amazon Bedrock の推論",
      "url": "https://docs.aws.amazon.com/bedrock/latest/userguide/inference.html"
    }
  ]
});
