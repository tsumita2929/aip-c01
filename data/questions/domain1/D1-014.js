window.DOMAIN1_QUESTIONS = window.DOMAIN1_QUESTIONS || [];
window.DOMAIN1_QUESTIONS.push({
  "id": "D1-014",
  "domain": 1,
  "task": "1.2",
  "skill": "1.2.3",
  "type": "single",
  "difficulty": "hard",
  "question": "あるグローバル企業が、Amazon Bedrock を使用したミッションクリティカルな契約書レビュー AI アプリケーションを運用しています。アプリケーションは API Gateway と Lambda を経由して Bedrock の FM を呼び出し、契約書のリスク分析結果を返します。特定リージョンの Bedrock サービスが利用不可になった場合でも、99.9% の可用性でサービスを継続する必要があります。同時に、運用チームの負荷を最小限に抑える必要があります。最も適切な耐障害性アーキテクチャはどれですか？",
  "options": [
    {
      "id": "A",
      "text": "Bedrock のクロスリージョン推論プロファイルを使用して、アプリケーションコードを変更せずに複数リージョンにリクエストを自動分散する。Lambda 関数では推論プロファイル ARN を指定して Bedrock を呼び出す"
    },
    {
      "id": "B",
      "text": "2つのリージョンにそれぞれ API Gateway + Lambda + Bedrock の完全なスタックを構築し、Route 53 のフェイルオーバールーティングポリシーとヘルスチェックで障害時に自動的にセカンダリリージョンに切り替える"
    },
    {
      "id": "C",
      "text": "Lambda 関数内でプライマリリージョンの Bedrock 呼び出しが失敗した場合に、別リージョンの Bedrock エンドポイントにフォールバックするカスタムリトライロジックを実装する。リトライ回数とタイムアウトを設定し、CloudWatch で障害率を監視する"
    },
    {
      "id": "D",
      "text": "Bedrock のプロビジョニングスループットを購入して専用キャパシティを確保し、API Gateway のスロットリング設定でリクエスト量を制限する。CloudWatch アラームでキャパシティ不足を検知した場合に SNS で運用チームに通知する"
    }
  ],
  "correctAnswers": [
    "A"
  ],
  "explanation": "Bedrock のクロスリージョン推論プロファイルは、複数リージョンにリクエストを自動分散するマネージド機能であり、アプリケーションコードの変更なしにリージョン障害時のフェイルオーバーを実現できます。運用チームの負荷も最小限です。Route 53 フェイルオーバー（B）は技術的に実現可能ですが、2リージョン分のインフラ構築・維持が必要であり、API Gateway・Lambda・IAM ポリシーなどの同期管理の運用負荷が高くなります。クロスリージョン推論プロファイルで同等の耐障害性をより低い運用負荷で実現できます。カスタムフォールバックロジック（C）はリージョン障害時の切り替えに対応できますが、リトライ時のレイテンシー増加、フォールバックロジックのテスト・維持、エンドポイント管理などのカスタムコードの運用負荷が発生します。プロビジョニングスループット + スロットリング（D）はキャパシティ確保には有効ですが、リージョン全体の障害には対応できず、SNS 通知は手動対応を前提としているため可用性要件を満たせません。（スキル1.2.3）",
  "optionExplanations": {
    "A": {
      "correct": true,
      "text": "正解です。クロスリージョン推論プロファイルはマネージド機能として複数リージョンへの自動分散を提供し、アプリケーションコード変更なしでリージョン障害に対応できます。運用チームがインフラの二重管理やフェイルオーバーロジックの維持を行う必要がなく、運用負荷が最小限です。"
    },
    "B": {
      "correct": false,
      "text": "不正解です。Route 53 フェイルオーバーは実績のある耐障害性パターンですが、2リージョン分の完全なスタック（API Gateway、Lambda、IAM ポリシー等）を構築・同期・維持する必要があり、運用負荷が高くなります。Bedrock のクロスリージョン推論プロファイルでより低い運用負荷で同等の効果を得られます。"
    },
    "C": {
      "correct": false,
      "text": "不正解です。カスタムフォールバックロジックはリージョン障害への対応は可能ですが、プライマリ障害時のリトライによるレイテンシー増加が発生します。また、フォールバックロジック自体のテスト・維持やエンドポイント ARN の管理など、運用負荷の最小化要件を満たせません。"
    },
    "D": {
      "correct": false,
      "text": "不正解です。プロビジョニングスループットは専用キャパシティを確保しますが、リージョン全体の Bedrock サービス障害には対応できません。また SNS 通知による手動対応では99.9%の可用性要件を満たすことができません。"
    }
  },
  "references": [
    {
      "title": "Amazon Bedrock クロスリージョン推論",
      "url": "https://docs.aws.amazon.com/bedrock/latest/userguide/cross-region-inference.html"
    },
    {
      "title": "Amazon Bedrock 推論プロファイル",
      "url": "https://docs.aws.amazon.com/bedrock/latest/userguide/inference-profiles.html"
    }
  ]
});
