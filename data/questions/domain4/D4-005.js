window.DOMAIN4_QUESTIONS = window.DOMAIN4_QUESTIONS || [];
window.DOMAIN4_QUESTIONS.push({
  "id": "D4-005",
  "domain": 4,
  "task": "4.1",
  "skill": "4.1.1",
  "type": "multiple",
  "difficulty": "hard",
  "question": "ある金融機関が Amazon Bedrock を利用して、長大な金融レポート（1レポートあたり約50,000トークン）を分析するアプリケーションを運用しています。月間処理量は約2,000レポートで、トークンコストが予算の大部分を占めています。トークン効率を改善してコストを削減するために有効なアプローチを2つ選択してください。",
  "options": [
    {
      "id": "A",
      "text": "レポートの前処理でプロンプト圧縮を適用し、重要な情報を維持しながら入力トークン数を削減する"
    },
    {
      "id": "B",
      "text": "各レポートを小さなチャンクに分割し、すべてのチャンクを個別にモデルに送信して結果を結合する"
    },
    {
      "id": "C",
      "text": "トークン推定・追跡メカニズムを実装し、各リクエストのトークン使用量を可視化してボトルネックを特定する"
    },
    {
      "id": "D",
      "text": "モデルの出力トークン数を最大に設定して、1回のリクエストで完全な分析結果を得る"
    },
    {
      "id": "E",
      "text": "すべてのレポートをPDF形式からプレーンテキストに変換してからモデルに送信する"
    }
  ],
  "correctAnswers": [
    "A",
    "C"
  ],
  "explanation": "正解はAとCです。Aのプロンプト圧縮は、レポートから冗長な表現や不要な情報を除去し、重要な情報を維持しながら入力トークン数を大幅に削減する直接的なコスト削減手法です。Cのトークン推定・追跡メカニズムは、各リクエストのトークン消費パターンを可視化し、どの処理で最もトークンが消費されているかを特定することで、的を絞った最適化を可能にします。Bのチャンク分割・個別送信は、各チャンクにシステムプロンプトやインストラクションが付加されるため、合計トークン数がむしろ増加する可能性があります。Dの出力トークン最大化は不要な出力を生成しコストを増加させます。EのPDFからテキスト変換は前処理として有用ですが、それ自体でトークン効率を大幅に改善する手法ではありません。（スキル: 4.1.1）",
  "optionExplanations": {
    "A": {
      "correct": true,
      "text": "正解です。プロンプト圧縮は、トークン効率改善とコスト削減の両方を直接満たします。特にレポートから冗長な表現や不要な情報を除去し、重要な情報を維持しながら入力トークン数を大幅に削減できます。"
    },
    "B": {
      "correct": false,
      "text": "不正解です。チャンク分割・個別送信は処理の分散は可能なものの、各チャンクにシステムプロンプトやインストラクションが付加されるため合計トークン数がむしろ増加し、トークン効率改善の要件を満たしません。"
    },
    "C": {
      "correct": true,
      "text": "正解です。トークン推定・追跡メカニズムは、トークン効率改善とコスト削減の両方を直接満たします。特に各リクエストのトークン消費パターンを可視化し、ボトルネックを特定することで的を絞った最適化が可能になります。"
    },
    "D": {
      "correct": false,
      "text": "不正解です。出力トークン数を最大に設定すると不要な出力が生成されるため、トークン効率改善の要件に反し、コストも増加します。"
    },
    "E": {
      "correct": false,
      "text": "不正解です。PDF からプレーンテキストへの変換は前処理として有用なものの、変換後もテキスト量は大きく変わらないため、トークン効率の大幅な改善にはつながりません。"
    }
  },
  "references": [
    {
      "title": "Amazon Bedrock ランタイム API",
      "url": "https://docs.aws.amazon.com/bedrock/latest/userguide/service_code_examples_bedrock-runtime.html"
    },
    {
      "title": "Amazon Bedrock プロンプトエンジニアリングガイドライン",
      "url": "https://docs.aws.amazon.com/bedrock/latest/userguide/prompt-engineering-guidelines.html"
    },
    {
      "title": "Amazon CloudWatch による Amazon Bedrock のモニタリング",
      "url": "https://docs.aws.amazon.com/bedrock/latest/userguide/monitoring-cw.html"
    }
  ]
});
