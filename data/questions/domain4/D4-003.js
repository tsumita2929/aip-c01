window.DOMAIN4_QUESTIONS = window.DOMAIN4_QUESTIONS || [];
window.DOMAIN4_QUESTIONS.push({
  "id": "D4-003",
  "domain": 4,
  "task": "4.1",
  "skill": "4.1.3",
  "type": "single",
  "difficulty": "hard",
  "question": "ある大手保険会社が Amazon Bedrock で保険金請求処理の自動化システムを運用しています。平日の業務時間帯（9:00〜18:00）にリクエストが集中し、1時間あたり約5,000件の推論リクエストが発生しますが、夜間・週末はほぼゼロになります。現在、オンデマンドスループットを使用していますが、ピーク時にスロットリングが頻発し、処理の遅延が問題になっています。コスト効率を維持しながら、ピーク時のスロットリングを解消する最適な戦略はどれですか。",
  "options": [
    {
      "id": "A",
      "text": "24時間365日分のプロビジョンドスループットを購入して常時高スループットを確保する"
    },
    {
      "id": "B",
      "text": "業務時間帯の安定したスループットを確保するためにプロビジョンドスループット（1か月コミットメント）を購入し、予測可能な負荷パターンに対するスロットリングを防止する"
    },
    {
      "id": "C",
      "text": "AWS Lambda の同時実行数を引き上げて、より多くのリクエストを並列処理する"
    },
    {
      "id": "D",
      "text": "リクエストをすべて Amazon SQS キューに入れ、夜間にバッチ処理する"
    }
  ],
  "correctAnswers": [
    "B"
  ],
  "explanation": "正解はBです。Amazon Bedrock のプロビジョンドスループットは、予測可能な負荷パターンに対して一定のスループットを保証します。1か月または6か月のコミットメント期間で購入でき、業務時間帯のスロットリングを確実に防止できます。なお、プロビジョンドスループットにはネイティブのスケジューリング機能はありませんが、EventBridge + Lambda で作成・削除を自動化することも可能です。Aの24時間365日プロビジョンドスループットはスロットリングを解消しますが、夜間・週末の未使用分が大きなコスト浪費になります。CのLambda同時実行数引き上げは、Bedrock側のスループット制限を解消しないため根本解決になりません。Dの夜間バッチ処理は保険金請求処理のリアルタイム性要件を満たしません。（スキル: 4.1.3）",
  "optionExplanations": {
    "A": {
      "correct": false,
      "text": "不正解です。24時間365日分のプロビジョンドスループットはスロットリング解消の要件は満たすものの、夜間・週末の未使用分が大きなコスト浪費となり、コスト効率維持の要件を満たしません。"
    },
    "B": {
      "correct": true,
      "text": "正解です。プロビジョンドスループット（1か月コミットメント）は、スロットリング解消とコスト効率維持の両方を直接満たします。特に予測可能な負荷パターンに対して安定したスループットを最小の運用負荷で実現できます。"
    },
    "C": {
      "correct": false,
      "text": "不正解です。Lambda の同時実行数引き上げはアプリケーション側の並列処理能力を高めるものの、Bedrock 側のスループット制限（APIレート制限）は変わらないため、スロットリング解消の要件を満たしません。"
    },
    "D": {
      "correct": false,
      "text": "不正解です。夜間バッチ処理はコスト効率の面では有効なものの、保険金請求処理のリアルタイム性要件を満たしません。業務時間帯にリアルタイムで処理する必要があります。"
    }
  },
  "references": [
    {
      "title": "Amazon Bedrock プロビジョンドスループット",
      "url": "https://docs.aws.amazon.com/bedrock/latest/userguide/prov-throughput.html"
    },
    {
      "title": "Amazon Bedrock のクォータ",
      "url": "https://docs.aws.amazon.com/bedrock/latest/userguide/quotas.html"
    }
  ]
});
